# 红警3日冕摄像机组建路径自动规划
## 参考
[项目——基于GPS的种树机器人路径规划实战及详解](https://blog.csdn.net/Williamcsj/article/details/107148769)

## 用途
生成控制摄像机的路径文件，对整张地图进行拍摄，录制视频后，通过PR或者FFMPEG将视频文件输出成照片，以供contextCapture进行空三建模。
以此得到图片方便压测服务器集群阵列，也方便测绘院同学们进行学习。

## 拍摄
### 路径规划
将整张地图关键点坐标进行简化后，其如下所示：
```
789
654
123
```
将整个地图坐标进行简化，根据习惯可以选择横向或纵向进行扫描，本脚本默认为横向进行拍摄。

### 拍摄规则
由于本脚本为了尽可能的增加照片数量，并且照片与常规无人不太一样，并不携带经纬度。为了提高精度，会比常规的无人机拍摄进行更加精细化的路径规划。
按照CC的展示，不清楚如果以一个角度跑完一个路径后，修改拍摄角度、修改拍摄高度后进行拍摄，contextCapture是否可以正常的进行空三与建模。
1. 最先需要拍一组正视图照片，以方便观察路径是否正确。即R2为90.
2. 相机前进规则为`1 → 2 → 3 → 4 → 5 → 6 → 7 → 8 → 9`，横坐标与纵坐标之间的差值与经历的时间保持在一个固定值，以保证画面的清晰度。
3. RA3相机组件会在每个坐标点进行-180°-180°的进行拍摄。为了防止建模软件混乱这一参数预先不调整。以45°进行区分,根据json实测参数进行设置。
4. 关于坐标"z"可以理解为摄像机高度，但与常规的高度又不太一样，为了防止建模软件混乱这一参数预先不调整。
5. 由于我为了压测，尽可能增加照片的数量，因此实际生成路径为`1 → 3 → 4 → 6 → 7 → 9`

### v1.0
只以横向考虑
```
9 10
8 7
5 6
4 3
1 2
```
## 输入
地图右上角坐标：map_upper_right
地图左下角坐标:map_bottom_left
地图海面(水面)高度：map_lower
地图最高点高度：map_top

## 输出
```json
[
  1, 
  {
      "label": "upper left", 
      "r1": 0, 
      "r2": 45, 
      "r3": 0, 
      "x": 362.089599609375, 
      "y": 3637.910400390625, 
      "z": 700
  }
], 
```

## 快捷键
隐藏插件快捷键 Ctrl+Q
时间暂停快捷键 Ctrl+W
播放动画快捷键 Ctrl+E
关闭游戏UI End

## SMB性能优化
[性能说明FAQ](https://help.aliyun.com/document_detail/65228.html)

[Slow SMB files transfer speed](https://docs.microsoft.com/en-us/windows-server/storage/file-server/troubleshoot/slow-file-transfer)

## 测试
contextcapture 加载 13285张照片
易米景，使用cc16,使用易米景的smb（底层机械的云主机创建的smb服务器），用时04:44.10

99.150垃圾配置服务器，使用cc18,用时06:23.59

IBM truenas，使用cc18,用时14:39.27

## 建议储存方式
单文件夹储存2w张以下照片